<!DOCTYPE html>
<html>
<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
<style type="text/css">
  .morris-hover.morris-default-style {
    fill-opacity: 1.0;
  }
  </style>
header</head>
<body>
<p>test morris</p>
<button element.id = "btn" onclick="loadDoc()">chg</button>
<div id="myfirstchart" style="height: 250px;"></div>

<script>
var chart_rec = new Morris.Bar({
  // ID of the element in which to draw the chart.
  element: 'myfirstchart',
  // Chart data records -- each entry in this array corresponds to a point on
  // the chart.
  //data:  [{ year: '2008', value: 20 },
  //  { year: '2009', value: 10 },
  //  { year: '2010', value: 5 },
  //  { year: '2011', value: 5 },
  //  { year: '2012', value: 20 }],
  // The name of the data record attribute that contains x-values.
  xkey: 'usage_month',
  // A list of names of data record attributes that contain y-values.
  ykeys: ['kwh','revenue'],
  // Labels for the ykeys -- will be displayed when you hover over the
  // chart.
  labels: ['kwh','revenue'],
  stacked:true,
  barColors:['#2874a6','#17a589','#707b7c','#aab7b8','#a6acaf','#138d75'],
  barOpacity: 0.75

});
$.getJSON('/jsondata', function(data, status) {});
$(function(){
  $.getJSON("./jsondata", function(data, status){
console.log(data)
chart_rec.setData(data)
    });
  });

  function loadDoc() {
    chart_rec.options.ykeys = ['revenue','kwh']
    chart_rec.options.labels = ['revenue','kwh']
    //chart_rec.setData(chart_rec.options.labels)
    chart_rec.setData(chart_rec.options.data)
  }
</script>
</body>
</html>